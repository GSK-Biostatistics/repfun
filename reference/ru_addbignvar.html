<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assign Big N to Data Frame. — ru_addbignvar • repfun</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assign Big N to Data Frame. — ru_addbignvar"><meta name="description" content="Pass in a data frame along with identification options and have Big N added to it."><meta property="og:description" content="Pass in a data frame along with identification options and have Big N added to it."><meta property="og:image" content="https://github.com/GSK-Biostatistics/repfun/blob/misc/repfun.gif"><meta property="og:image:alt" content="Logo"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">repfun</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>TLF Use Cases</h6></li>
    <li><a class="dropdown-item" href="../articles/AE-Tbls.html">AE-Tbls</a></li>
    <li><a class="dropdown-item" href="../articles/Dem-Tbls.html">Dem-Tbls</a></li>
    <li><a class="dropdown-item" href="../articles/Figures.html">Figures</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Utility Use Cases</h6></li>
    <li><a class="dropdown-item" href="../articles/Add-Big-N-to-DataFrame.html">Add-Big-N-to-DataFrame</a></li>
    <li><a class="dropdown-item" href="../articles/Add-Decode-Variable.html">Add-Decode-Variable</a></li>
    <li><a class="dropdown-item" href="../articles/Add-Labels.html">Add-Labels</a></li>
    <li><a class="dropdown-item" href="../articles/Add-Page-Numbers-to-Dataframe.html">Add-Page-Numbers-to-Dataframe</a></li>
    <li><a class="dropdown-item" href="../articles/Add-Remove-Decode-Variables.html">Add-Remove-Decode-Variables</a></li>
    <li><a class="dropdown-item" href="../articles/Add-Supplemental-to-Domain.html">Add-Supplemental-to-Domain</a></li>
    <li><a class="dropdown-item" href="../articles/Align-Columns-for-TLF-Reporting.html">Align-Columns-for-TLF-Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/Convert-Format-Data-to-Codelist.html">Convert-Format-Data-to-Codelist</a></li>
    <li><a class="dropdown-item" href="../articles/Convert-RTF-to-PDF.html">Convert-RTF-to-PDF</a></li>
    <li><a class="dropdown-item" href="../articles/Convert-Strings-to-Dates.html">Convert-Strings-to-Dates</a></li>
    <li><a class="dropdown-item" href="../articles/Data-Compare.html">Data-Compare</a></li>
    <li><a class="dropdown-item" href="../articles/Denormalize-A-DataFrame.html">Denormalize-A-DataFrame</a></li>
    <li><a class="dropdown-item" href="../articles/Fill-Missings.html">Fill-Missings</a></li>
    <li><a class="dropdown-item" href="../articles/Generate-Counts-and-Percents.html">Generate-Counts-and-Percents</a></li>
    <li><a class="dropdown-item" href="../articles/Generate-Relative-Column-Widths-for-RTF-Reporting.html">Generate-Relative-Column-Widths-for-RTF-Reporting</a></li>
    <li><a class="dropdown-item" href="../articles/Generate-Summary-Statistics.html">Generate-Summary-Statistics</a></li>
    <li><a class="dropdown-item" href="../articles/Get-Data-for-Population.html">Get-Data-for-Population</a></li>
    <li><a class="dropdown-item" href="../articles/Global-Reporting-Setup.html">Global-Reporting-Setup</a></li>
    <li><a class="dropdown-item" href="../articles/Library-Setup.html">Library-Setup</a></li>
    <li><a class="dropdown-item" href="../articles/Load-Libraries.html">Load-Libraries</a></li>
    <li><a class="dropdown-item" href="../articles/Proc-Contents.html">Proc-Contents</a></li>
    <li><a class="dropdown-item" href="../articles/SAS-Type-Variable-Expansion.html">SAS-Type-Variable-Expansion</a></li>
    <li><a class="dropdown-item" href="../articles/Set-Data.html">Set-Data</a></li>
    <li><a class="dropdown-item" href="../articles/Stack-Variables.html">Stack-Variables</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GSK-Biostatistics/repfun/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Assign Big N to Data Frame.</h1>
      <small class="dont-index">Source: <a href="https://github.com/GSK-Biostatistics/repfun/blob/main/R/ru_addbignvar.R" class="external-link"><code>R/ru_addbignvar.R</code></a></small>
      <div class="d-none name"><code>ru_addbignvar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Pass in a data frame along with identification options and have Big N added to it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ru_addbignvar</span><span class="op">(</span></span>
<span>  <span class="va">dsetintoaddbign</span>,</span>
<span>  <span class="va">dsetintocount</span>,</span>
<span>  countdistinctvars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span><span class="op">)</span>,</span>
<span>  groupbyvars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  totalforvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  totalid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  totaldecode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span><span class="op">)</span>,</span>
<span>  codedecodevarpairs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  varcodelistpairs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  codelistnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  addbigntovarvalue <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  splitchar <span class="op">=</span> <span class="st">" "</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dsetintoaddbign">dsetintoaddbign<a class="anchor" aria-label="anchor" href="#arg-dsetintoaddbign"></a></dt>
<dd><p>The data set that will hold the derived big N value.</p></dd>


<dt id="arg-dsetintocount">dsetintocount<a class="anchor" aria-label="anchor" href="#arg-dsetintocount"></a></dt>
<dd><p>The data set that will be counted to generate big N.</p></dd>


<dt id="arg-countdistinctvars">countdistinctvars<a class="anchor" aria-label="anchor" href="#arg-countdistinctvars"></a></dt>
<dd><p>Variable(s) that contain values to be counted uniquely within any output grouping.</p></dd>


<dt id="arg-groupbyvars">groupbyvars<a class="anchor" aria-label="anchor" href="#arg-groupbyvars"></a></dt>
<dd><p>Variables in DSETINTOCOUNT to group the data by when counting to deriving the big N.</p></dd>


<dt id="arg-totalforvar">totalforvar<a class="anchor" aria-label="anchor" href="#arg-totalforvar"></a></dt>
<dd><p>Variable for which overall totals are required within all other grouped class variables.</p></dd>


<dt id="arg-totalid">totalid<a class="anchor" aria-label="anchor" href="#arg-totalid"></a></dt>
<dd><p>Value(s) used to populate the variable(s) specified in totalforvar.</p></dd>


<dt id="arg-totaldecode">totaldecode<a class="anchor" aria-label="anchor" href="#arg-totaldecode"></a></dt>
<dd><p>Value(s) used to populate the variable(s) of the decode variable(s) of the totalforvar.</p></dd>


<dt id="arg-codedecodevarpairs">codedecodevarpairs<a class="anchor" aria-label="anchor" href="#arg-codedecodevarpairs"></a></dt>
<dd><p>Specifies code and decode variable pairs. Those variables should be in parameter GROUPBYVARSNUMER.
One variable in the pair will contain the code, which is used in counting and ordering, and the other
will contain decode, which is used for presentation.</p></dd>


<dt id="arg-varcodelistpairs">varcodelistpairs<a class="anchor" aria-label="anchor" href="#arg-varcodelistpairs"></a></dt>
<dd><p>List of code/decode pairs of variables.</p></dd>


<dt id="arg-codelistnames">codelistnames<a class="anchor" aria-label="anchor" href="#arg-codelistnames"></a></dt>
<dd><p>List of decodes for use with decoding code/decode pairs.</p></dd>


<dt id="arg-addbigntovarvalue">addbigntovarvalue<a class="anchor" aria-label="anchor" href="#arg-addbigntovarvalue"></a></dt>
<dd><p>Place big N in a new variable or append to an existing variable (last groupbyvars value)?</p></dd>


<dt id="arg-splitchar">splitchar<a class="anchor" aria-label="anchor" href="#arg-splitchar"></a></dt>
<dd><p>Text to insert between existing string and big N.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame based on the incoming data frame but collapsed by groups with descriptive statistics added.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Yongwei Wang, <a href="mailto:yongwei.x.wang@viivhealthcare.com">yongwei.x.wang@viivhealthcare.com</a> <br>
Chris Rook, <a href="mailto:cr883296@gmail.com">cr883296@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gsk-biostatistics.github.io/repfun/">repfun</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">datdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"\\"</span>,<span class="st">"/"</span>,<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,fixed<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,<span class="st">"datdir"</span><span class="op">)</span>;</span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">datdir</span>,showWarnings<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">repfun</span><span class="fu">::</span><span class="fu"><a href="copydata.html">copydata</a></span><span class="op">(</span><span class="va">datdir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">repfun</span><span class="fu">::</span><span class="fu"><a href="rs_setup.html">rs_setup</a></span><span class="op">(</span>D_POPDATA<span class="op">=</span><span class="fu">repfun</span><span class="fu">::</span><span class="va"><a href="adsl.html">adsl</a></span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SAFFL</span> <span class="op">==</span><span class="st">'Y'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 D_SUBJID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>,<span class="st">"USUBJID"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 R_DICTION<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                 R_OTHERDATA<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                 R_INPUTDATA<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                 R_RAWDATA<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                 R_SDTMDATA<span class="op">=</span><span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                 R_ADAMDATA<span class="op">=</span><span class="va">datdir</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">G_POPDATA</span> <span class="op">&lt;-</span> <span class="fu">repfun</span><span class="fu">:::</span><span class="va">rfenv</span><span class="op">$</span><span class="va">G_POPDATA</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>TRT01AN<span class="op">=</span></span></span>
<span class="r-in"><span>                                         <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">TRT01A</span><span class="op">==</span><span class="st">'Placebo'</span>,<span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                         <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">TRT01A</span><span class="op">==</span><span class="st">'Xanomeline Low Dose'</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">G_POPDATA</span><span class="op">$</span><span class="va">TRT01AN</span>,<span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">'Actual Treatment for Period 01 (n)'</span></span></span>
<span class="r-in"><span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="fu">repfun</span><span class="fu">:::</span><span class="va">rfenv</span><span class="op">$</span><span class="va">adamdata</span><span class="op">$</span><span class="fu">adae.rda</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">G_POPDATA</span>,</span></span>
<span class="r-in"><span>                          by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'STUDYID'</span>,<span class="st">'USUBJID'</span>,<span class="st">'SAFFL'</span>,<span class="st">'TRT01A'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">TRTEMFL</span><span class="op">==</span><span class="st">'Y'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">addbign</span> <span class="op">&lt;-</span> <span class="fu">repfun</span><span class="fu">::</span><span class="fu">ru_addbignvar</span><span class="op">(</span><span class="va">adae</span>,</span></span>
<span class="r-in"><span>                         <span class="va">G_POPDATA</span>,</span></span>
<span class="r-in"><span>                         groupbyvars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         countdistinctvars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, <span class="st">"USUBJID"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         totalforvar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01AN"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         totalid <span class="op">=</span> <span class="fl">99</span>,</span></span>
<span class="r-in"><span>                         totaldecode <span class="op">=</span> <span class="st">'Total'</span>,</span></span>
<span class="r-in"><span>                         codedecodevarpairs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRT01AN"</span>, <span class="st">"TRT01A"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         varcodelistpairs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         codelistnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         addbigntovarvalue<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                         splitchar<span class="op">=</span><span class="st">"~"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>           <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">STUDYID</span>, <span class="va">USUBJID</span>, <span class="va">TRT01AN</span>, <span class="va">TRT01A</span>, <span class="va">AEBODSYS</span>, <span class="va">AEDECOD</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Rook, Yongwei Wang, GlaxoSmithKline Research &amp; Development Limited.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

